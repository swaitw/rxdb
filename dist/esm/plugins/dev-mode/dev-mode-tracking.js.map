{"version":3,"file":"dev-mode-tracking.js","names":["RXDB_VERSION","hasPremiumFlag","iframeShown","addDevModeTrackingIframe","db","window","location","iframe","document","createElement","style","visibility","width","height","position","top","left","opacity","src","body","appendChild","isLocalHost","hostname","includes"],"sources":["../../../../src/plugins/dev-mode/dev-mode-tracking.ts"],"sourcesContent":["import type { RxDatabase } from '../../types';\nimport {\n    RXDB_VERSION,\n    hasPremiumFlag\n} from '../utils/index.ts';\n\n\nlet iframeShown = false;\n\n\n/**\n * Adds an iframe to track the results of marketing efforts.\n */\nexport async function addDevModeTrackingIframe(db: RxDatabase) {\n    /**\n     * Only run this in browser AND localhost AND dev-mode.\n     * Make sure this is never used in production by someone.\n     */\n    if (\n        iframeShown ||\n        typeof window === 'undefined' ||\n        typeof location === 'undefined'\n        // !isLocalHost()\n    ) {\n        return;\n    }\n\n\n    // do not show if premium flag is set.\n    if (await hasPremiumFlag()) {\n        return;\n    }\n\n    iframeShown = true;\n\n    const iframe = document.createElement('iframe');\n    /**\n     * Do not use display:none\n     * @link https://medium.com/@zachcaceres/dont-use-display-none-to-hide-iframes-in-safari-b51715eb22c4\n     */\n    iframe.style.visibility = 'hidden';\n    iframe.width = '1px';\n    iframe.height = '1px';\n    iframe.style.position = 'absolute';\n    iframe.style.top = '0';\n    iframe.style.left = '0';\n    iframe.style.opacity = '0.1';\n    iframe.src = 'https://rxdb.info/html/dev-mode-iframe.html?version=' + RXDB_VERSION;\n    document.body.appendChild(iframe);\n}\n\n\nfunction isLocalHost() {\n    return (\n        location.hostname === 'localhost' ||\n        location.hostname.includes('localhost') ||\n        location.hostname === '127.0.0.1' ||\n        location.hostname === '0.0.0.0' ||\n        location.hostname === '[::1]'  // IPv6\n    );\n}\n"],"mappings":"AACA,SACIA,YAAY,EACZC,cAAc,QACX,mBAAmB;AAG1B,IAAIC,WAAW,GAAG,KAAK;;AAGvB;AACA;AACA;AACA,OAAO,eAAeC,wBAAwBA,CAACC,EAAc,EAAE;EAC3D;AACJ;AACA;AACA;EACI,IACIF,WAAW,IACX,OAAOG,MAAM,KAAK,WAAW,IAC7B,OAAOC,QAAQ,KAAK;EACpB;EAAA,EACF;IACE;EACJ;;EAGA;EACA,IAAI,MAAML,cAAc,CAAC,CAAC,EAAE;IACxB;EACJ;EAEAC,WAAW,GAAG,IAAI;EAElB,IAAMK,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/C;AACJ;AACA;AACA;EACIF,MAAM,CAACG,KAAK,CAACC,UAAU,GAAG,QAAQ;EAClCJ,MAAM,CAACK,KAAK,GAAG,KAAK;EACpBL,MAAM,CAACM,MAAM,GAAG,KAAK;EACrBN,MAAM,CAACG,KAAK,CAACI,QAAQ,GAAG,UAAU;EAClCP,MAAM,CAACG,KAAK,CAACK,GAAG,GAAG,GAAG;EACtBR,MAAM,CAACG,KAAK,CAACM,IAAI,GAAG,GAAG;EACvBT,MAAM,CAACG,KAAK,CAACO,OAAO,GAAG,KAAK;EAC5BV,MAAM,CAACW,GAAG,GAAG,sDAAsD,GAAGlB,YAAY;EAClFQ,QAAQ,CAACW,IAAI,CAACC,WAAW,CAACb,MAAM,CAAC;AACrC;AAGA,SAASc,WAAWA,CAAA,EAAG;EACnB,OACIf,QAAQ,CAACgB,QAAQ,KAAK,WAAW,IACjChB,QAAQ,CAACgB,QAAQ,CAACC,QAAQ,CAAC,WAAW,CAAC,IACvCjB,QAAQ,CAACgB,QAAQ,KAAK,WAAW,IACjChB,QAAQ,CAACgB,QAAQ,KAAK,SAAS,IAC/BhB,QAAQ,CAACgB,QAAQ,KAAK,OAAO,CAAE;EAAA;AAEvC","ignoreList":[]}