{"version":3,"file":"humans-collection.js","names":["clone","schemas","schemaObjects","getConfig","assert","createRxDatabase","randomToken","create","size","collectionName","multiInstance","eventReduce","storage","getStorage","db","name","ignoreDuplicate","localDocuments","collections","addCollections","schema","human","docsData","Array","fill","map","humanData","writeResult","bulkInsert","deepStrictEqual","error","createBySchema","migrationStrategies","createAttachments","schemaJson","attachments","createNoCompression","schemaJSON","keyCompression","createAgeIndex","amount","humana","humanAgeIndex","multipleOnSameDB","human2","docsData2","collection","collection2","createNested","nestedhuman","nestedHuman","nestedHumanData","createDeepNested","deepNestedHuman","deepNestedHumanData","createMultiInstance","password","undefined","hasMultiInstance","Error","createPrimary","primaryHuman","simpleHumanData","createHumanWithTimestamp","databaseName","conflictHandler","humans","humanWithTimestamp","humanWithTimestampData","createMigrationCollection","addMigrationStrategies","autoMigrate","attachment","Object","assign","doc","age","parseInt","colName","cols","simpleHuman","Promise","all","insert","simpleHumanAge","then","putAttachment","close","db2","cols2","simpleHumanV3","createRelated","refHuman","doc1","refHumanData","doc2","bestFriend","createRelatedNested","refHumanNested","refHumanNestedData","foo","createIdAndAgeIndex","humanIdAndAgeIndex","humanWithIdAndAgeIndexDocumentType"],"sources":["../../../../src/plugins/test-utils/humans-collection.ts"],"sourcesContent":["import clone from 'clone';\nimport * as schemas from './schemas.ts';\nimport * as schemaObjects from './schema-objects.ts';\nimport { getConfig } from './config.ts';\nimport assert from 'assert';\n\nimport {\n    createRxDatabase,\n    RxJsonSchema,\n    RxCollection,\n    RxDatabase,\n    randomToken,\n    MigrationStrategies,\n    RxAttachmentCreator,\n    RxStorage,\n    RxConflictHandler\n} from '../../index.ts';\n\nimport { HumanDocumentType } from './schemas.ts';\n\nexport async function create(\n    size: number = 20,\n    collectionName: string = 'human',\n    multiInstance: boolean = true,\n    eventReduce: boolean = true,\n    storage: RxStorage<any, any> = getConfig().storage.getStorage()\n\n): Promise<RxCollection<HumanDocumentType, {}, {}>> {\n    const db = await createRxDatabase<{ human: RxCollection<HumanDocumentType>; }>({\n        name: randomToken(10),\n        storage,\n        multiInstance,\n        eventReduce,\n        ignoreDuplicate: true,\n        localDocuments: true\n    });\n\n    const collections = await db.addCollections({\n        [collectionName]: {\n            schema: schemas.human,\n            localDocuments: true\n        }\n    });\n\n    // insert data\n    if (size > 0) {\n        const docsData = new Array(size)\n            .fill(0)\n            .map(() => schemaObjects.humanData());\n        const writeResult = await collections[collectionName].bulkInsert(docsData);\n        assert.deepStrictEqual(writeResult.error, []);\n    }\n    return collections[collectionName];\n}\n\nexport async function createBySchema<RxDocumentType = {}>(\n    schema: RxJsonSchema<RxDocumentType>,\n    name = 'human',\n    storage = getConfig().storage.getStorage(),\n    migrationStrategies?: MigrationStrategies\n): Promise<RxCollection<RxDocumentType, {}, {}>> {\n    const db = await createRxDatabase<{ [prop: string]: RxCollection<RxDocumentType>; }>({\n        name: randomToken(10),\n        storage,\n        multiInstance: true,\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n\n    const collections = await db.addCollections({\n        [name]: {\n            schema,\n            migrationStrategies\n        }\n    });\n\n    return collections[name];\n}\n\nexport async function createAttachments(\n    size = 20,\n    name = 'human',\n    multiInstance = true\n): Promise<RxCollection<HumanDocumentType, {}, {}>> {\n    if (!name) {\n        name = 'human';\n    }\n    const db = await createRxDatabase<{ [prop: string]: RxCollection<HumanDocumentType>; }>({\n        name: randomToken(10),\n        storage: getConfig().storage.getStorage(),\n        multiInstance,\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n\n    const schemaJson = clone(schemas.human);\n    schemaJson.attachments = {};\n\n    const collections = await db.addCollections({\n        [name]: {\n            schema: schemaJson\n        }\n    });\n\n    // insert data\n    if (size > 0) {\n        const docsData = new Array(size)\n            .fill(0)\n            .map(() => schemaObjects.humanData());\n        await collections[name].bulkInsert(docsData);\n    }\n\n    return collections[name];\n}\n\nexport async function createNoCompression(\n    size = 20,\n    name = 'human'\n): Promise<RxCollection<HumanDocumentType>> {\n    const db = await createRxDatabase<{ [prop: string]: RxCollection<HumanDocumentType>; }>({\n        name: randomToken(10),\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    const schemaJSON = clone(schemas.human);\n    schemaJSON.keyCompression = false;\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        [name]: {\n            schema: schemaJSON\n        }\n    });\n\n    // insert data\n    if (size > 0) {\n        const docsData = new Array(size)\n            .fill(0)\n            .map(() => schemaObjects.humanData());\n        await collections[name].bulkInsert(docsData);\n    }\n\n    return collections[name];\n}\n\nexport async function createAgeIndex(\n    amount = 20\n): Promise<RxCollection<HumanDocumentType>> {\n    const db = await createRxDatabase<{ humana: RxCollection<HumanDocumentType>; }>({\n        name: randomToken(10),\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        humana: {\n            schema: schemas.humanAgeIndex\n        }\n    });\n\n    // insert data\n    if (amount > 0) {\n        const docsData = new Array(amount)\n            .fill(0)\n            .map(() => schemaObjects.humanData());\n        await collections.humana.bulkInsert(docsData);\n    }\n\n    return collections.humana;\n}\n\nexport async function multipleOnSameDB(\n    size = 10\n): Promise<{\n    db: RxDatabase<{\n        human: RxCollection<HumanDocumentType>;\n        human2: RxCollection<HumanDocumentType>;\n    }>;\n    collection: RxCollection<HumanDocumentType>;\n    collection2: RxCollection<HumanDocumentType>;\n}> {\n    const db = await createRxDatabase<{\n        human: RxCollection<HumanDocumentType>;\n        human2: RxCollection<HumanDocumentType>;\n    }>({\n        name: randomToken(10),\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        human: {\n            schema: schemas.human\n        },\n        human2: {\n            schema: schemas.human\n        }\n    });\n\n    // insert data\n    if (size > 0) {\n        const docsData = new Array(size)\n            .fill(0)\n            .map(() => schemaObjects.humanData());\n        await collections.human.bulkInsert(docsData);\n\n        const docsData2 = new Array(size)\n            .fill(0)\n            .map(() => schemaObjects.humanData());\n        await collections.human2.bulkInsert(docsData2);\n    }\n\n    return {\n        db,\n        collection: collections.human,\n        collection2: collections.human2\n    };\n}\n\nexport async function createNested(\n    amount = 5\n): Promise<RxCollection<schemaObjects.NestedHumanDocumentType>> {\n    const db = await createRxDatabase<{ nestedhuman: RxCollection<schemaObjects.NestedHumanDocumentType>; }>({\n        name: randomToken(10),\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        nestedhuman: {\n            schema: schemas.nestedHuman\n        }\n    });\n\n    // insert data\n    if (amount > 0) {\n        const docsData = new Array(amount)\n            .fill(0)\n            .map(() => schemaObjects.nestedHumanData());\n        await collections.nestedhuman.bulkInsert(docsData);\n    }\n\n    return collections.nestedhuman;\n}\n\nexport async function createDeepNested(\n    amount = 5\n): Promise<RxCollection<schemaObjects.DeepNestedHumanDocumentType>> {\n    const db = await createRxDatabase<{ nestedhuman: RxCollection<schemaObjects.DeepNestedHumanDocumentType>; }>({\n        name: randomToken(10),\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        nestedhuman: {\n            schema: schemas.deepNestedHuman\n        }\n    });\n\n    // insert data\n    if (amount > 0) {\n        const docsData = new Array(amount)\n            .fill(0)\n            .map(() => schemaObjects.deepNestedHumanData());\n        await collections.nestedhuman.bulkInsert(docsData);\n    }\n\n    return collections.nestedhuman;\n}\n\nexport async function createMultiInstance(\n    name: string,\n    amount = 0,\n    password = undefined,\n    storage: RxStorage<any, any> = getConfig().storage.getStorage()\n): Promise<RxCollection<HumanDocumentType, {}, {}>> {\n    if (!getConfig().storage.hasMultiInstance) {\n        throw new Error('createMultiInstance() cannot be called on a storage with hasMultiInstance:false');\n    }\n\n    const db = await createRxDatabase<{ human: RxCollection<HumanDocumentType>; }>({\n        name,\n        storage,\n        password,\n        multiInstance: true,\n        eventReduce: true,\n        ignoreDuplicate: true,\n        localDocuments: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        human: {\n            schema: schemas.human,\n            localDocuments: true\n        }\n    });\n    // insert data\n    if (amount > 0) {\n        const docsData = new Array(amount)\n            .fill(0)\n            .map(() => schemaObjects.humanData());\n        await collections.human.bulkInsert(docsData);\n    }\n\n    return collections.human;\n}\n\nexport async function createPrimary(\n    amount = 10,\n    name = randomToken(10)\n): Promise<RxCollection<schemaObjects.SimpleHumanDocumentType>> {\n\n    const db = await createRxDatabase<{ human: RxCollection<schemaObjects.SimpleHumanDocumentType>; }>({\n        name,\n        storage: getConfig().storage.getStorage(),\n        multiInstance: true,\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        human: {\n            schema: schemas.primaryHuman\n        }\n    });\n\n    // insert data\n    if (amount > 0) {\n        const docsData = new Array(amount)\n            .fill(0)\n            .map(() => schemaObjects.simpleHumanData());\n        await collections.human.bulkInsert(docsData);\n    }\n\n    return collections.human;\n}\n\nexport async function createHumanWithTimestamp(\n    amount = 0,\n    databaseName = randomToken(10),\n    multiInstance = true,\n    storage = getConfig().storage.getStorage(),\n    conflictHandler?: RxConflictHandler<any>\n\n): Promise<RxCollection<schemaObjects.HumanWithTimestampDocumentType>> {\n\n    const db = await createRxDatabase<{ humans: RxCollection<schemaObjects.HumanWithTimestampDocumentType>; }>({\n        name: databaseName,\n        storage,\n        multiInstance,\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        humans: {\n            conflictHandler,\n            schema: schemas.humanWithTimestamp\n        }\n    });\n\n    // insert data\n    if (amount > 0) {\n        const docsData = new Array(amount)\n            .fill(0)\n            .map(() => schemaObjects.humanWithTimestampData());\n        await collections.humans.bulkInsert(docsData);\n    }\n\n    return collections.humans;\n}\n\nexport async function createMigrationCollection(\n    amount = 0,\n    addMigrationStrategies: MigrationStrategies = {},\n    name = randomToken(10),\n    autoMigrate = false,\n    attachment?: RxAttachmentCreator\n): Promise<RxCollection<schemaObjects.SimpleHumanV3DocumentType>> {\n\n    const migrationStrategies: any = Object.assign(\n        {\n            1: (doc: any) => doc,\n            2: (doc: any) => doc,\n            3: (doc: any) => {\n                doc.age = parseInt(doc.age, 10);\n                return doc;\n            }\n        },\n        addMigrationStrategies\n    );\n\n\n    const colName = 'human';\n    const db = await createRxDatabase<{ human: RxCollection<schemaObjects.SimpleHumanAgeDocumentType>; }>({\n        name,\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    const cols = await db.addCollections({\n        [colName]: {\n            schema: attachment !== undefined ? { ...schemas.simpleHuman, attachments: {} } : schemas.simpleHuman,\n            autoMigrate: false\n        }\n    });\n\n    await Promise.all(\n        new Array(amount)\n            .fill(0)\n            .map(() => cols[colName].insert(schemaObjects.simpleHumanAge()).then(doc => {\n                if (attachment !== undefined) {\n                    return doc.putAttachment(attachment);\n                }\n            }))\n    );\n    await db.close();\n\n    const db2 = await createRxDatabase<{ human: RxCollection<schemaObjects.SimpleHumanV3DocumentType>; }>({\n        name,\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    const cols2 = await db2.addCollections({\n        [colName]: {\n            schema: attachment !== undefined ? { ...schemas.simpleHumanV3, attachments: {} } : schemas.simpleHumanV3,\n            autoMigrate,\n            migrationStrategies\n        }\n    });\n\n    return cols2[colName];\n}\n\nexport async function createRelated(\n    name = randomToken(10)\n): Promise<RxCollection<schemaObjects.RefHumanDocumentType>> {\n    const db = await createRxDatabase<{ human: RxCollection<schemaObjects.RefHumanDocumentType>; }>({\n        name,\n        storage: getConfig().storage.getStorage(),\n        multiInstance: true,\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        human: {\n            schema: schemas.refHuman\n        }\n    });\n\n    const doc1 = schemaObjects.refHumanData();\n    const doc2 = schemaObjects.refHumanData(doc1.name);\n    doc1.bestFriend = doc2.name; // cross-relation\n\n    await collections.human.insert(doc1);\n    await collections.human.insert(doc2);\n\n    return collections.human;\n}\n\nexport async function createRelatedNested(\n    name = randomToken(10)\n): Promise<RxCollection<schemaObjects.RefHumanNestedDocumentType>> {\n\n    const db = await createRxDatabase<{ human: RxCollection<schemaObjects.RefHumanNestedDocumentType>; }>({\n        name,\n        storage: getConfig().storage.getStorage(),\n        multiInstance: true,\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        human: {\n            schema: schemas.refHumanNested\n        }\n    });\n\n    const doc1 = schemaObjects.refHumanNestedData();\n    const doc2 = schemaObjects.refHumanNestedData(doc1.name);\n    doc1.foo.bestFriend = doc2.name; // cross-relation\n\n    await collections.human.insert(doc1);\n    await collections.human.insert(doc2);\n\n    return collections.human;\n}\n\nexport async function createIdAndAgeIndex(\n    amount = 20\n): Promise<RxCollection<schemaObjects.HumanWithIdAndAgeIndexDocumentType>> {\n    const db = await createRxDatabase<{ humana: RxCollection<schemaObjects.HumanWithIdAndAgeIndexDocumentType>; }>({\n        name: randomToken(10),\n        storage: getConfig().storage.getStorage(),\n        eventReduce: true,\n        ignoreDuplicate: true\n    });\n    // setTimeout(() => db.close(), dbLifetime);\n    const collections = await db.addCollections({\n        humana: {\n            schema: schemas.humanIdAndAgeIndex\n        }\n    });\n\n    // insert data\n    if (amount > 0) {\n        const docsData = new Array(amount)\n            .fill(0)\n            .map(() => schemaObjects.humanWithIdAndAgeIndexDocumentType());\n        await collections.humana.bulkInsert(docsData);\n    }\n\n    return collections.humana;\n}\n"],"mappings":"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","ignoreList":[]}