{"version":3,"file":"default-conflict-handler.js","names":["deepEqual","stripAttachmentsDataFromDocument","defaultConflictHandler","isEqual","a","b","resolve","i","realMasterState"],"sources":["../../../src/replication-protocol/default-conflict-handler.ts"],"sourcesContent":["import {\n    deepEqual\n} from '../plugins/utils/index.ts';\nimport { stripAttachmentsDataFromDocument } from '../rx-storage-helper.ts';\nimport type { RxConflictHandler } from '../types';\n\nexport const defaultConflictHandler: RxConflictHandler<any> = {\n    isEqual(a, b) {\n        /**\n         * If the documents are deep equal,\n         * we have no conflict.\n         * On your custom conflict handler you might only\n         * check some properties, like the updatedAt time,\n         * for better performance, because deepEqual is expensive.\n         */\n        return deepEqual(\n            stripAttachmentsDataFromDocument(a),\n            stripAttachmentsDataFromDocument(b)\n        );\n    },\n    resolve(i) {\n        /**\n         * The default conflict handler will always\n         * drop the fork state and use the master state instead.\n         */\n        return i.realMasterState;\n    }\n};\n"],"mappings":"AAAA,SACIA,SAAS,QACN,2BAA2B;AAClC,SAASC,gCAAgC,QAAQ,yBAAyB;AAG1E,OAAO,IAAMC,sBAA8C,GAAG;EAC1DC,OAAOA,CAACC,CAAC,EAAEC,CAAC,EAAE;IACV;AACR;AACA;AACA;AACA;AACA;AACA;IACQ,OAAOL,SAAS,CACZC,gCAAgC,CAACG,CAAC,CAAC,EACnCH,gCAAgC,CAACI,CAAC,CACtC,CAAC;EACL,CAAC;EACDC,OAAOA,CAACC,CAAC,EAAE;IACP;AACR;AACA;AACA;IACQ,OAAOA,CAAC,CAACC,eAAe;EAC5B;AACJ,CAAC","ignoreList":[]}